### 项目目录结构 (Project Directory Structure)
```
interview-agent/
├── .env                    # 环境变量 (OpenAI Key, ElevenLabs Key 等)
├── requirements.txt        # 项目依赖库
├── config.py               # 全局配置 (模型选择、路径设置)
│
├── app/                    # 后端核心逻辑
│   ├── __init__.py
│   ├── core/               # AI 核心大脑 (LangChain/LangGraph)
│   │   ├── __init__.py
│   │   ├── llm.py          # LLM 模型初始化 (GPT-4o, Claude)
│   │   ├── prompts.py      # 所有的 Prompt 模板管理
│   │   ├── memory.py       # 对话历史记忆管理
│   │   ├── rag_engine.py   # RAG 逻辑 (简历解析, 向量库检索)
│   │   └── graph.py        # LangGraph 状态机 (控制面试流程)
│   │
│   ├── services/           # 外部服务接口
│   │   ├── audio_service.py  # 语音处理 (STT/TTS 封装)
│   │   └── file_service.py   # 文件上传与读取 (PDF 解析)
│   │
│   └── models/             # Pydantic 数据模型 (用于数据验证)
│       └── schemas.py      # 定义输入输出格式 (如 InterviewState)
│
├── server.py               # (可选) FastAPI 入口，如果你想做成 API 服务
│
├── frontend/               # 前端界面 Chainlit
│   ├── app.py              # 前端主入口
│   └── assets/             # 静态资源 (Logo, CSS)
│
└── data/                   # 本地数据存储
    ├── resumes/            # 用户上传的简历暂存
    └── vector_db/          # Faiss 向量库文件
```
### 核心模块详细说明

#### 1. `app/core/prompts.py` (Prompt 管理)

不要把 Prompt 硬编码在代码里。集中管理方便调优。

```python
# 示例内容
SYSTEM_INTERVIEWER_PROMPT = """
你是一位严格但专业的面试官，你的名字叫 {name}。
当前面试阶段：{phase} (技术面/行为面)。
请根据候选人的简历：{resume_context}，提出下一个问题。
注意：只问一个问题，不要长篇大论。
"""

FEEDBACK_PROMPT = """
请对刚才候选人的回答进行评分（0-100）并给出改进建议...
"""
```

#### 2. `app/core/rag_engine.py` (简历与知识库)

处理“针对性学习”的核心。这里负责把简历变成 AI 能理解的文本。

- **功能**：使用 `PyPDFLoader` 读取简历，使用 `RecursiveCharacterTextSplitter` 切分，存入向量库（如果是刷题模式，这里还要负责检索相似面试题）。
    

#### 3. `app/core/graph.py` (面试流程控制)

使用 **LangGraph** 定义面试的状态流转。这是让面试体“像人”的关键。

- **状态 (State)**：`WaitInput` -> `Thinking` -> `Speaking` -> `WaitInput`
    
- **节点 (Nodes)**：
    
    - `generate_question`: 基于历史生成问题。
        
    - `evaluate_answer`: (后台运行) 分析用户回答质量。
        
    - `check_finish`: 判断面试是否应该结束。
        

#### 4. `app/services/audio_service.py` (听与说)

封装语音 API，实现具体的 STT (Speech-to-Text) 和 TTS (Text-to-Speech)。

Python

```
class AudioService:
    def transcribe(self, audio_file):
        # 调用 OpenAI Whisper
        pass
    
    def speak(self, text):
        # 调用 ElevenLabs 或 OpenAI TTS
        # 返回音频流或文件路径
        pass
```

#### 5. `frontend/app.py` (界面层)

推荐使用 **Streamlit** 快速验证，或者 **Chainlit** (专门针对 Chatbot 优化)。

- **UI 逻辑**：
    
    1. 侧边栏上传 PDF 简历。
        
    2. 输入 Job Description。
        
    3. 选择模式（刷题 / 模拟面试）。
        
    4. 聊天窗口显示对话。
        
    5. 包含一个 `st.audio_input` 录音组件。
        

---

### 🛠️ 技术栈清单 (requirements.txt)

这是你需要安装的核心库：

Plaintext

```
langchain
langchain-openai
langchain-community
langgraph           # 必须：用于构建有状态的面试流程
pypdf               # 用于解析简历
chromadb            # 向量数据库
openai              # 调用 GPT 模型
streamlit           # 前端界面 (或 chainlit)
python-dotenv       # 环境变量管理
pydantic            # 数据验证
```

---

### 🚀 开发路线 (Step-by-Step)

你可以按照这个顺序填充框架：

1. **基础层 (Day 1)**:
    
    - 创建目录。
        
    - 编写 `file_service.py`：实现上传 PDF 并提取文字。
        
    - 编写 `llm.py`：配置好 OpenAI API 连接。
        
2. **核心逻辑层 (Day 2-3)**:
    
    - 在 `prompts.py` 写好面试官的人设。
        
    - 在 `graph.py` 写一个简单的 Chain：`简历 + 历史对话 -> 下一个问题`。
        
3. **交互层 (Day 4)**:
    
    - 用 Chainlit 搭建界面，打通文字版的“一问一答”。
        
4. **语音增强 (Day 5)**:
    
    - 实现 `audio_service.py`。
        
    - 在 Chainlit 中加入语音输入和自动播放音频的功能。